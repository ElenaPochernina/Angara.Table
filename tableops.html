<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>Table Operations
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="description" content="A .NET library to work with table data type."/>
    <meta name="author" content="Microsoft Research"/>

    <script src="https://code.jquery.com/jquery-1.8.0.js"></script>
    <script src="https://code.jquery.com/ui/1.8.23/jquery-ui.js"></script>
    <script src="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
    <link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet"/>

    <link type="text/css" rel="stylesheet" href="/Angara.Table/content/style.css" />
    <script type="text/javascript" src="/Angara.Table/content/tips.js"></script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="container">
      <div class="masthead">
        <ul class="nav nav-pills pull-right">
          <li><a href="http://fsharp.org">fsharp.org</a></li>
          <li><a href="http://github.com/Microsoft/Angara.Table">github page</a></li>
        </ul>
        <h3 class="muted"><a href="/Angara.Table/index.html">Angara.Table</a></h3>
      </div>
      <hr />
      <div class="row">
        <div class="span9" id="main">
          
<h1><a name="Table-Operations" class="anchor" href="#Table-Operations">Table Operations</a></h1>
<p><a href="angara-data-table.html">Angara.Data.Table</a> exposes a set of functions that should simplify a code
operating with tables, though payoff is that the type checking is performed in runtime.</p>
<h3><a name="Duplicate-Names-Disambiguation" class="anchor" href="#Duplicate-Names-Disambiguation">Duplicate Names Disambiguation</a></h3>
<p>All functions described below identify a column by its name. Thus duplicate names cause ambiguity which is implicitly resolved
by choosing the first column having the given name. Still you can explicitly resolve the ambiguity using one of the following approaches:</p>
<ol>
<li>
If only one of the columns is needed, then you can build a new table that 
has all columns excluding unnecessary.
</li>
<li>If multiple columns with same name are necessary, build a new table that has same columns but with unique names.</li>
</ol>
<p>None of the approaches causes column data evaluation or copying.</p>
<p>For example, if <code>table</code> has several columns named <code>"x"</code> and you need only one with index 0,
build a table that contains the only needed column <code>"x"</code>:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs7', 10)" onmouseover="showTip(event, 'fs7', 10)" class="i">table2</span> <span class="o">=</span>
    <span class="i">table</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs8', 11)" onmouseover="showTip(event, 'fs8', 11)" class="t">Seq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 12)" onmouseover="showTip(event, 'fs9', 12)" class="f">mapi</span> (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs10', 13)" onmouseover="showTip(event, 'fs10', 13)" class="i">i</span> <span onmouseout="hideTip(event, 'fs11', 14)" onmouseover="showTip(event, 'fs11', 14)" class="i">c</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs10', 15)" onmouseover="showTip(event, 'fs10', 15)" class="i">i</span>, <span onmouseout="hideTip(event, 'fs11', 16)" onmouseover="showTip(event, 'fs11', 16)" class="i">c</span>)
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs8', 17)" onmouseover="showTip(event, 'fs8', 17)" class="t">Seq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs12', 18)" onmouseover="showTip(event, 'fs12', 18)" class="f">choose</span> (<span class="k">fun</span> (<span onmouseout="hideTip(event, 'fs10', 19)" onmouseover="showTip(event, 'fs10', 19)" class="i">i</span>, <span onmouseout="hideTip(event, 'fs11', 20)" onmouseover="showTip(event, 'fs11', 20)" class="i">c</span>) <span class="k">-&gt;</span> 
        <span class="k">match</span> <span onmouseout="hideTip(event, 'fs11', 21)" onmouseover="showTip(event, 'fs11', 21)" class="i">c</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs13', 22)" onmouseover="showTip(event, 'fs13', 22)" class="i">Name</span> <span class="k">with</span>
        | <span class="s">&quot;x&quot;</span> <span class="k">when</span> <span onmouseout="hideTip(event, 'fs10', 23)" onmouseover="showTip(event, 'fs10', 23)" class="i">i</span> <span class="o">&lt;&gt;</span> <span class="n">0</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs14', 24)" onmouseover="showTip(event, 'fs14', 24)" class="p">None</span>
        | _ <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs15', 25)" onmouseover="showTip(event, 'fs15', 25)" class="p">Some</span> <span onmouseout="hideTip(event, 'fs11', 26)" onmouseover="showTip(event, 'fs11', 26)" class="i">c</span>)
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs16', 27)" onmouseover="showTip(event, 'fs16', 27)" class="t">Table</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs17', 28)" onmouseover="showTip(event, 'fs17', 28)" class="f">OfColumns</span>
</code></pre></td>
</tr>
</table>
<p>Next example renames columns named <code>"x"</code> by appending the column index to the name:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs18', 29)" onmouseover="showTip(event, 'fs18', 29)" class="i">table3</span> <span class="o">=</span>
    <span class="i">table</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs8', 30)" onmouseover="showTip(event, 'fs8', 30)" class="t">Seq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 31)" onmouseover="showTip(event, 'fs9', 31)" class="f">mapi</span> (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs10', 32)" onmouseover="showTip(event, 'fs10', 32)" class="i">i</span> <span onmouseout="hideTip(event, 'fs11', 33)" onmouseover="showTip(event, 'fs11', 33)" class="i">c</span> <span class="k">-&gt;</span> 
        <span class="k">match</span> <span onmouseout="hideTip(event, 'fs11', 34)" onmouseover="showTip(event, 'fs11', 34)" class="i">c</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs13', 35)" onmouseover="showTip(event, 'fs13', 35)" class="i">Name</span> <span class="k">with</span>
        | <span class="s">&quot;x&quot;</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs19', 36)" onmouseover="showTip(event, 'fs19', 36)" class="t">Column</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs20', 37)" onmouseover="showTip(event, 'fs20', 37)" class="f">Create</span> (<span onmouseout="hideTip(event, 'fs21', 38)" onmouseover="showTip(event, 'fs21', 38)" class="f">sprintf</span> <span class="s">&quot;x (</span><span class="pf">%d</span><span class="s">)&quot;</span> <span onmouseout="hideTip(event, 'fs10', 39)" onmouseover="showTip(event, 'fs10', 39)" class="i">i</span>, <span onmouseout="hideTip(event, 'fs11', 40)" onmouseover="showTip(event, 'fs11', 40)" class="i">c</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs22', 41)" onmouseover="showTip(event, 'fs22', 41)" class="i">Rows</span>, <span onmouseout="hideTip(event, 'fs11', 42)" onmouseover="showTip(event, 'fs11', 42)" class="i">c</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs23', 43)" onmouseover="showTip(event, 'fs23', 43)" class="i">Height</span>)
        | _ <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs11', 44)" onmouseover="showTip(event, 'fs11', 44)" class="i">c</span>)
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs16', 45)" onmouseover="showTip(event, 'fs16', 45)" class="t">Table</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs17', 46)" onmouseover="showTip(event, 'fs17', 46)" class="f">OfColumns</span>
</code></pre></td>
</tr>
</table>
<h3><a name="Mapping-Rows" class="anchor" href="#Mapping-Rows">Mapping Rows</a></h3>
<h4><a name="Table-Map-Table-Mapi" class="anchor" href="#Table-Map-Table-Mapi">Table.Map, Table.Mapi</a></h4>
<p>The function <code>Table.Map</code> builds a sequence whose elements are the results of applying the given function to each of the rows of certain table columns.
<code>Table.Mapi</code> also provides an integer index passed to the function which indicates the index of row being transformed.</p>
<p>The signature is: <code>Map&lt;'a,'b,'c&gt; : columnNames:seq&lt;string&gt; -&gt; map:('a-&gt;'b) -&gt; table:Table -&gt; 'c seq</code></p>
<p>The generic function <code>map:'a-&gt;'b</code> is only partially defined. If <code>columnNames</code> contains:</p>
<ul>
<li>0 columns, then <code>map:unit-&gt;'c</code>, so <code>'a = unit</code>, <code>'b = 'c</code></li>
<li>1 column, then <code>map:'a-&gt;'c</code>, where <code>'a</code> is the type of the column, the function result type is <code>'b = 'c</code></li>
<li>2 columns, then <code>map:'a-&gt;'d-&gt;'c</code>, where <code>'a</code> and <code>'d</code> are the types of the columns, so <code>'b = 'd-&gt;'c</code></li>
<li>3 columns, then <code>map:'a-&gt;'d-&gt;'e-&gt;'c</code>, where <code>'a</code>, <code>'d</code> and <code>'e</code> are the types of the columns, so <code>'b = 'd-&gt;'e-&gt;'c</code></li>
<li>n...</li>
</ul>
<p>The following example produces a sequence of multiplied values of columns <code>"x"</code> and <code>"sin(x)"</code> for each of the table rows:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs24', 47)" onmouseover="showTip(event, 'fs24', 47)" class="i">xsinx</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs25', 48)" onmouseover="showTip(event, 'fs25', 48)" class="t">float</span> <span onmouseout="hideTip(event, 'fs26', 49)" onmouseover="showTip(event, 'fs26', 49)" class="t">seq</span> <span class="o">=</span> 
    <span class="i">table</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs16', 50)" onmouseover="showTip(event, 'fs16', 50)" class="t">Table</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs27', 51)" onmouseover="showTip(event, 'fs27', 51)" class="f">Map</span> [<span class="s">&quot;x&quot;</span>; <span class="s">&quot;sin(x)&quot;</span>] (<span class="k">fun</span> (<span onmouseout="hideTip(event, 'fs28', 52)" onmouseover="showTip(event, 'fs28', 52)" class="i">x</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs25', 53)" onmouseover="showTip(event, 'fs25', 53)" class="t">float</span>) (<span onmouseout="hideTip(event, 'fs29', 54)" onmouseover="showTip(event, 'fs29', 54)" class="i">sinx</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs25', 55)" onmouseover="showTip(event, 'fs25', 55)" class="t">float</span>) <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs28', 56)" onmouseover="showTip(event, 'fs28', 56)" class="i">x</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs29', 57)" onmouseover="showTip(event, 'fs29', 57)" class="i">sinx</span>)    
</code></pre></td>
</tr>
</table>
<table class="pre"><tr><td><pre><code>seq [0.0; 0.009983341665; 0.03973386616; 0.088656062; ...]</code></pre></td></tr></table>
<h4><a name="Table-MapToColumn-Table-MapiToColumn" class="anchor" href="#Table-MapToColumn-Table-MapiToColumn">Table.MapToColumn, Table.MapiToColumn</a></h4>
<p>The function <code>Table.MapToColumn</code> builds a new table that contains all columns of the given table and
a new column or a replacement of an original table column (if there is an existing column with same name as the target name);
elements of the column are the results of applying the given function to each of the rows of the given table columns.
<code>Table.MapiToColumn</code> also provides an integer index passed to the function which indicates the index of row being transformed.</p>
<p>The signature is: <code>MapToColumn : newColumnName:string -&gt; columnNames:seq&lt;string&gt; -&gt; map:('a-&gt;'b) -&gt; table:Table -&gt; Table</code></p>
<p>The generic function <code>map:'a-&gt;'b</code> is only partially defined. If <code>columnNames</code> contains:</p>
<ul>
<li>0 columns, then <code>map:unit-&gt;'b</code>, so <code>'a = unit</code> and the new column type is <code>'b</code></li>
<li>1 column, then <code>map:'a-&gt;'b</code>, where <code>'a</code> is the type of the source column, and <code>'b</code> is the new column type</li>
<li>2 columns, then <code>map:'a-&gt;'d-&gt;'c</code>, where <code>'a</code> and <code>'d</code> are the types of the source columns, so <code>'b = 'd-&gt;'c</code>, and <code>'c</code> is the new column type</li>
<li>3 columns, then <code>map:'a-&gt;'d-&gt;'e-&gt;'c</code>, where <code>'a</code>, <code>'d</code> and <code>'e</code> are the types of the source columns, so <code>'b = 'd-&gt;'e-&gt;'c</code>, and <code>'c</code> is the new column type</li>
<li>n...</li>
</ul>
<p>Ultimate result type of the <code>map</code> function must be valid column type: either <code>int</code>, <code>float</code>, <code>string</code>, <code>bool</code> or <code>DateTime</code>.</p>
<p>The following examples adds new table column named <code>"log(x)"</code> which contains logarithm of the column <code>"x"</code> value for each of the table rows:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs30', 58)" onmouseover="showTip(event, 'fs30', 58)" class="i">tableLog</span> <span class="o">=</span> <span class="i">table</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs16', 59)" onmouseover="showTip(event, 'fs16', 59)" class="t">Table</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs31', 60)" onmouseover="showTip(event, 'fs31', 60)" class="f">MapToColumn</span> <span class="s">&quot;log(x)&quot;</span> [<span class="s">&quot;x&quot;</span>] <span onmouseout="hideTip(event, 'fs32', 61)" onmouseover="showTip(event, 'fs32', 61)" class="f">log</span>
</code></pre></td>
</tr>
</table>
<table class="pre"><tr><td><pre><code>seq
  [x[100]: float seq [0.0; 0.1; 0.2; 0.3; ...];
   sin(x)[100]: float seq [0.0; 0.09983341665; 0.1986693308; 0.2955202067; ...];
   log(x)[100]: Array is not evaluated yet]</code></pre></td></tr></table>
<h3><a name="Filtering-Rows" class="anchor" href="#Filtering-Rows">Filtering Rows</a></h3>
<p>The function <code>Table.Filter</code> returns a new table containing only the rows of the table for which the given predicate returns <code>true</code>.
The predicate gets values of the given columns only. <code>Table.Filteri</code> also provides an integer index passed to the predicate which indicates the index of row being filtered.</p>
<p>The signature is: <code>Filter : columnNames:seq&lt;string&gt; -&gt; predicate:('a-&gt;'b) -&gt; table:Table -&gt; Table</code></p>
<p>The generic function <code>predicate:'a-&gt;'b</code> is only partially defined. If <code>columnNames</code> contains:</p>
<ul>
<li>1 column, then <code>predicate:'a-&gt;bool</code>, where <code>'a</code> is the type of the column, and <code>'b = bool</code></li>
<li>2 columns, then <code>predicate:'a-&gt;'d-&gt;bool</code>, where <code>'a</code> and <code>'d</code> are the types of the columns, and <code>'b = 'd-&gt;bool</code></li>
<li>3 columns, then <code>predicate:'a-&gt;'d-&gt;'e-&gt;bool</code>, where <code>'a</code>, <code>'d</code> and <code>'e</code> are the types of the columns, and <code>'b = 'd-&gt;'e-&gt;bool</code></li>
<li>n...</li>
</ul>
<p>The following example creates a table that contains only the rows of the <code>table</code> where value of
the column <code>"x"</code> is between 0 and 1:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs33', 62)" onmouseover="showTip(event, 'fs33', 62)" class="i">table_filter_x</span> <span class="o">=</span> <span class="i">table</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs16', 63)" onmouseover="showTip(event, 'fs16', 63)" class="t">Table</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs34', 64)" onmouseover="showTip(event, 'fs34', 64)" class="f">Filter</span> [<span class="s">&quot;x&quot;</span>] (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs28', 65)" onmouseover="showTip(event, 'fs28', 65)" class="i">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs28', 66)" onmouseover="showTip(event, 'fs28', 66)" class="i">x</span> <span class="o">&gt;</span><span class="o">=</span> <span class="n">0.0</span> <span class="o">&amp;&amp;</span> <span onmouseout="hideTip(event, 'fs28', 67)" onmouseover="showTip(event, 'fs28', 67)" class="i">x</span> <span class="o">&lt;=</span> <span class="n">1.0</span>) 
</code></pre></td>
</tr>
</table>
<table class="pre"><tr><td><pre><code>seq [x[11]: Array is not evaluated yet; sin(x)[11]: Array is not evaluated yet]</code></pre></td></tr></table>
<p>To get a subset of table rows by row index, use the function <code>Table.Filteri</code>. The following example builds a table that contains only first 10 rows of the original table:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs35', 68)" onmouseover="showTip(event, 'fs35', 68)" class="i">table_10rows</span> <span class="o">=</span> <span class="i">table</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs16', 69)" onmouseover="showTip(event, 'fs16', 69)" class="t">Table</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs36', 70)" onmouseover="showTip(event, 'fs36', 70)" class="f">Filteri</span> [] (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs10', 71)" onmouseover="showTip(event, 'fs10', 71)" class="i">i</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs10', 72)" onmouseover="showTip(event, 'fs10', 72)" class="i">i</span> <span class="o">&lt;</span> <span class="n">10</span>)
</code></pre></td>
</tr>
</table>
<h3><a name="Concatenating-Tables" class="anchor" href="#Concatenating-Tables">Concatenating Tables</a></h3>
<p>The function <code>Table.Append</code> returns a new table that contains the columns of both given tables in order.
Duplicate column names are allowed. Heights of the tables must be equal.</p>
<p>The signature is: <code>Table.Append : table1:Table -&gt; table2:Table -&gt; Table</code></p>
<h3><a name="Transforming-Tables" class="anchor" href="#Transforming-Tables">Transforming Tables</a></h3>
<p>The function <code>Table.Transform</code> applies the given function to the values of the given table columns and returns the function result.
Each column is represented as an immutable array.</p>
<p>The signature is: <code>Transform&lt;'a,'b,'c&gt; : columnNames:seq&lt;string&gt; -&gt; transform:(ImmutableArray&lt;'a&gt;-&gt;'b) -&gt; table:Table -&gt; 'c</code></p>
<p>The generic function <code>transform:ImmutableArray&lt;'a&gt;-&gt;'b</code> is only partially defined. If <code>columnNames</code> contains:</p>
<ul>
<li>1 column, then <code>transform:ImmutableArray&lt;'a&gt;-&gt;'c</code>, where <code>'a</code> is the type of the column, so <code>'b = 'c</code>.</li>
<li>2 columns, then <code>transform:ImmutableArray&lt;'a&gt;-&gt;ImmutableArray&lt;'d&gt;-&gt;'c</code>, where <code>'a</code> and <code>'d</code> are the types of the columns, so <code>'b = ImmutableArray&lt;'d&gt;-&gt;'c</code></li>
<li>n...</li>
</ul>
<p>The following example computes the midpoint approximation to the integral of <code>sin(x)</code> using the table containing columns "x" and "sin(x)":</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">open</span> <span onmouseout="hideTip(event, 'fs3', 73)" onmouseover="showTip(event, 'fs3', 73)" class="i">System</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs4', 74)" onmouseover="showTip(event, 'fs4', 74)" class="i">Collections</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs6', 75)" onmouseover="showTip(event, 'fs6', 75)" class="i">Immutable</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs37', 76)" onmouseover="showTip(event, 'fs37', 76)" class="f">approxIntegr</span> (<span onmouseout="hideTip(event, 'fs38', 77)" onmouseover="showTip(event, 'fs38', 77)" class="i">x</span><span class="o">:</span><span class="i">ImmutableArray</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs25', 78)" onmouseover="showTip(event, 'fs25', 78)" class="i">float</span><span class="o">&gt;</span>) (<span onmouseout="hideTip(event, 'fs39', 79)" onmouseover="showTip(event, 'fs39', 79)" class="i">y</span><span class="o">:</span><span class="i">ImmutableArray</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs25', 80)" onmouseover="showTip(event, 'fs25', 80)" class="i">float</span><span class="o">&gt;</span>) <span class="o">=</span>
    <span class="k">let</span> <span class="k">mutable</span> <span onmouseout="hideTip(event, 'fs40', 81)" onmouseover="showTip(event, 'fs40', 81)" class="v">sum</span> <span class="o">=</span> <span class="n">0.0</span>
    <span class="k">for</span> <span onmouseout="hideTip(event, 'fs41', 82)" onmouseover="showTip(event, 'fs41', 82)" class="i">i</span> <span class="k">in</span> <span class="n">0..</span><span onmouseout="hideTip(event, 'fs38', 83)" onmouseover="showTip(event, 'fs38', 83)" class="i">x</span><span class="o">.</span><span class="i">Length</span><span class="o">-</span><span class="n">2</span> <span class="k">do</span> <span onmouseout="hideTip(event, 'fs40', 84)" onmouseover="showTip(event, 'fs40', 84)" class="v">sum</span> <span class="o">&lt;-</span> <span onmouseout="hideTip(event, 'fs40', 85)" onmouseover="showTip(event, 'fs40', 85)" class="v">sum</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs39', 86)" onmouseover="showTip(event, 'fs39', 86)" class="i">y</span><span class="o">.</span>[<span onmouseout="hideTip(event, 'fs41', 87)" onmouseover="showTip(event, 'fs41', 87)" class="i">i</span>] <span class="o">*</span> (<span onmouseout="hideTip(event, 'fs38', 88)" onmouseover="showTip(event, 'fs38', 88)" class="i">x</span><span class="o">.</span>[<span onmouseout="hideTip(event, 'fs41', 89)" onmouseover="showTip(event, 'fs41', 89)" class="i">i</span><span class="o">+</span><span class="n">1</span>] <span class="o">-</span> <span onmouseout="hideTip(event, 'fs38', 90)" onmouseover="showTip(event, 'fs38', 90)" class="i">x</span><span class="o">.</span>[<span onmouseout="hideTip(event, 'fs41', 91)" onmouseover="showTip(event, 'fs41', 91)" class="i">i</span>])
    <span onmouseout="hideTip(event, 'fs40', 92)" onmouseover="showTip(event, 'fs40', 92)" class="v">sum</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs42', 93)" onmouseover="showTip(event, 'fs42', 93)" class="i">integr</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs25', 94)" onmouseover="showTip(event, 'fs25', 94)" class="t">float</span> <span class="o">=</span> <span class="i">table</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs16', 95)" onmouseover="showTip(event, 'fs16', 95)" class="t">Table</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs43', 96)" onmouseover="showTip(event, 'fs43', 96)" class="f">Transform</span> [<span class="s">&quot;x&quot;</span>;<span class="s">&quot;sin(x)&quot;</span>] <span onmouseout="hideTip(event, 'fs37', 97)" onmouseover="showTip(event, 'fs37', 97)" class="f">approxIntegr</span>
</code></pre></td>
</tr>
</table>
<table class="pre"><tr><td><pre><code>1.910493359</code></pre></td></tr></table>
<p>The next example builds a new table which contains a single column with running maximum of the column "sin(x)" of the existing table:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
<span class="l">9: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs44', 98)" onmouseover="showTip(event, 'fs44', 98)" class="f">getRunningMax</span>(<span onmouseout="hideTip(event, 'fs45', 99)" onmouseover="showTip(event, 'fs45', 99)" class="i">values</span><span class="o">:</span> <span class="i">ImmutableArray</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs25', 100)" onmouseover="showTip(event, 'fs25', 100)" class="i">float</span><span class="o">&gt;</span>) <span class="o">=</span> 
    <span onmouseout="hideTip(event, 'fs45', 101)" onmouseover="showTip(event, 'fs45', 101)" class="i">values</span> 
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs8', 102)" onmouseover="showTip(event, 'fs8', 102)" class="t">Seq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs46', 103)" onmouseover="showTip(event, 'fs46', 103)" class="f">skip</span> <span class="n">1</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs8', 104)" onmouseover="showTip(event, 'fs8', 104)" class="t">Seq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs47', 105)" onmouseover="showTip(event, 'fs47', 105)" class="f">scan</span>(<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs48', 106)" onmouseover="showTip(event, 'fs48', 106)" class="i">max</span> <span onmouseout="hideTip(event, 'fs49', 107)" onmouseover="showTip(event, 'fs49', 107)" class="i">sin</span> <span class="k">-&gt;</span> <span class="k">if</span> <span onmouseout="hideTip(event, 'fs49', 108)" onmouseover="showTip(event, 'fs49', 108)" class="i">sin</span> <span class="o">&gt;</span> <span onmouseout="hideTip(event, 'fs48', 109)" onmouseover="showTip(event, 'fs48', 109)" class="i">max</span> <span class="k">then</span> <span onmouseout="hideTip(event, 'fs49', 110)" onmouseover="showTip(event, 'fs49', 110)" class="i">sin</span> <span class="k">else</span> <span onmouseout="hideTip(event, 'fs48', 111)" onmouseover="showTip(event, 'fs48', 111)" class="i">max</span>) <span onmouseout="hideTip(event, 'fs45', 112)" onmouseover="showTip(event, 'fs45', 112)" class="i">values</span><span class="o">.</span>[<span class="n">0</span>]

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs50', 113)" onmouseover="showTip(event, 'fs50', 113)" class="i">tableMax</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs16', 114)" onmouseover="showTip(event, 'fs16', 114)" class="t">Table</span> <span class="o">=</span>
    <span class="i">table</span> 
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs16', 115)" onmouseover="showTip(event, 'fs16', 115)" class="t">Table</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs43', 116)" onmouseover="showTip(event, 'fs43', 116)" class="f">Transform</span> [<span class="s">&quot;sin(x)&quot;</span>] (<span class="k">fun</span> (<span onmouseout="hideTip(event, 'fs51', 117)" onmouseover="showTip(event, 'fs51', 117)" class="i">sinx</span><span class="o">:</span><span class="i">ImmutableArray</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs25', 118)" onmouseover="showTip(event, 'fs25', 118)" class="i">float</span><span class="o">&gt;</span>) <span class="k">-&gt;</span>
        <span onmouseout="hideTip(event, 'fs16', 119)" onmouseover="showTip(event, 'fs16', 119)" class="t">Table</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs17', 120)" onmouseover="showTip(event, 'fs17', 120)" class="f">OfColumns</span> [ <span onmouseout="hideTip(event, 'fs19', 121)" onmouseover="showTip(event, 'fs19', 121)" class="t">Column</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs20', 122)" onmouseover="showTip(event, 'fs20', 122)" class="f">Create</span>(<span class="s">&quot;running max of sin(x)&quot;</span>, <span onmouseout="hideTip(event, 'fs44', 123)" onmouseover="showTip(event, 'fs44', 123)" class="f">getRunningMax</span> <span onmouseout="hideTip(event, 'fs51', 124)" onmouseover="showTip(event, 'fs51', 124)" class="i">sinx</span>) ])
</code></pre></td>
</tr>
</table>
<table class="pre"><tr><td><pre><code>seq [running max of sin(x)[100]: Array is not evaluated yet]</code></pre></td></tr></table>
<p>There are cases when the table produced by <code>Transform</code> should be appended to the original table.
The function <code>Table.AppendTransform</code> transforms the original table and then concatenates the original and transformed tables:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs52', 125)" onmouseover="showTip(event, 'fs52', 125)" class="i">tableWithMax</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs16', 126)" onmouseover="showTip(event, 'fs16', 126)" class="t">Table</span> <span class="o">=</span>
    <span class="i">table</span> 
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs16', 127)" onmouseover="showTip(event, 'fs16', 127)" class="t">Table</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs53', 128)" onmouseover="showTip(event, 'fs53', 128)" class="f">AppendTransform</span> [<span class="s">&quot;sin(x)&quot;</span>] (<span class="k">fun</span> (<span onmouseout="hideTip(event, 'fs51', 129)" onmouseover="showTip(event, 'fs51', 129)" class="i">sinx</span><span class="o">:</span><span class="i">ImmutableArray</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs25', 130)" onmouseover="showTip(event, 'fs25', 130)" class="i">float</span><span class="o">&gt;</span>) <span class="k">-&gt;</span>
        <span onmouseout="hideTip(event, 'fs16', 131)" onmouseover="showTip(event, 'fs16', 131)" class="t">Table</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs17', 132)" onmouseover="showTip(event, 'fs17', 132)" class="f">OfColumns</span> [ <span onmouseout="hideTip(event, 'fs19', 133)" onmouseover="showTip(event, 'fs19', 133)" class="t">Column</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs20', 134)" onmouseover="showTip(event, 'fs20', 134)" class="f">Create</span>(<span class="s">&quot;running max of sin(x)&quot;</span>, <span onmouseout="hideTip(event, 'fs44', 135)" onmouseover="showTip(event, 'fs44', 135)" class="f">getRunningMax</span> <span onmouseout="hideTip(event, 'fs51', 136)" onmouseover="showTip(event, 'fs51', 136)" class="i">sinx</span>) ])
</code></pre></td>
</tr>
</table>
<table class="pre"><tr><td><pre><code>seq
  [x[100]: float seq [0.0; 0.1; 0.2; 0.3; ...];
   sin(x)[100]: float seq [0.0; 0.09983341665; 0.1986693308; 0.2955202067; ...];
   running max of sin(x)[100]: Array is not evaluated yet]</code></pre></td></tr></table>
<p>The signature is: <code>AppendTransform : columnNames:seq&lt;string&gt; -&gt; transform:(ImmutableArray&lt;'a&gt;-&gt;'b) -&gt; table:Table -&gt; Table</code></p>
<p>It is similar to the <code>Transform</code> function but here the ultimate result type of the partially defined function <code>transform</code> must be <code>Table</code>.</p>

<div class="tip" id="fs1">namespace Angara</div>
<div class="tip" id="fs2">namespace Angara.Data</div>
<div class="tip" id="fs3">namespace System</div>
<div class="tip" id="fs4">namespace System.Collections</div>
<div class="tip" id="fs5">namespace System.Collections.Generic</div>
<div class="tip" id="fs6">namespace System.Collections.Immutable</div>
<div class="tip" id="fs7">val table2 : Table<br /><br />Full name: Tableops.table2</div>
<div class="tip" id="fs8">module Seq<br /><br />from Microsoft.FSharp.Collections</div>
<div class="tip" id="fs9">val mapi : mapping:(int -&gt; &#39;T -&gt; &#39;U) -&gt; source:seq&lt;&#39;T&gt; -&gt; seq&lt;&#39;U&gt;<br /><br />Full name: Microsoft.FSharp.Collections.Seq.mapi</div>
<div class="tip" id="fs10">val i : int</div>
<div class="tip" id="fs11">val c : Column</div>
<div class="tip" id="fs12">val choose : chooser:(&#39;T -&gt; &#39;U option) -&gt; source:seq&lt;&#39;T&gt; -&gt; seq&lt;&#39;U&gt;<br /><br />Full name: Microsoft.FSharp.Collections.Seq.choose</div>
<div class="tip" id="fs13">property Column.Name: string</div>
<div class="tip" id="fs14">union case Option.None: Option&lt;&#39;T&gt;</div>
<div class="tip" id="fs15">union case Option.Some: Value: &#39;T -&gt; Option&lt;&#39;T&gt;</div>
<div class="tip" id="fs16">Multiple items<br />type Table =<br />&#160;&#160;interface IEnumerable&lt;Column&gt;<br />&#160;&#160;abstract member ToRows : unit -&gt; seq&lt;&#39;r&gt;<br />&#160;&#160;member Count : int<br />&#160;&#160;member Item : name:string -&gt; Column with get<br />&#160;&#160;member Item : index:int -&gt; Column with get<br />&#160;&#160;member RowsCount : int<br />&#160;&#160;member TryItem : name:string -&gt; Column option with get<br />&#160;&#160;member TryItem : index:int -&gt; Column option with get<br />&#160;&#160;static member Add : column:Column -&gt; table:Table -&gt; Table<br />&#160;&#160;static member Append : table1:Table -&gt; table2:Table -&gt; Table<br />&#160;&#160;...<br /><br />Full name: Angara.Data.Table<br /><br />--------------------<br />type Table&lt;&#39;r&gt; =<br />&#160;&#160;inherit Table<br />&#160;&#160;member AddRow : &#39;r -&gt; Table&lt;&#39;r&gt;<br />&#160;&#160;member AddRows : seq&lt;&#39;r&gt; -&gt; Table&lt;&#39;r&gt;<br />&#160;&#160;member Rows : ImmutableArray&lt;&#39;r&gt;<br /><br />Full name: Angara.Data.Table&lt;_&gt;</div>
<div class="tip" id="fs17">static member Table.OfColumns : columns:seq&lt;Column&gt; -&gt; Table</div>
<div class="tip" id="fs18">val table3 : Table<br /><br />Full name: Tableops.table3</div>
<div class="tip" id="fs19">type Column =<br />&#160;&#160;member Height : int<br />&#160;&#160;member Name : string<br />&#160;&#160;member Rows : ColumnValues<br />&#160;&#160;static member Create : name:string * rows:ColumnValues * count:int -&gt; Column<br />&#160;&#160;static member Create : name:string * rows:seq&lt;DateTime&gt; * ?count:int -&gt; Column<br />&#160;&#160;static member Create : name:string * rows:seq&lt;bool&gt; * ?count:int -&gt; Column<br />&#160;&#160;static member Create : name:string * rows:seq&lt;string&gt; * ?count:int -&gt; Column<br />&#160;&#160;static member Create : name:string * rows:seq&lt;float&gt; * ?count:int -&gt; Column<br />&#160;&#160;static member Create : name:string * rows:seq&lt;int&gt; * ?count:int -&gt; Column<br />&#160;&#160;static member CreateFromUntyped : name:string * rows:Array -&gt; Column<br />&#160;&#160;...<br /><br />Full name: Angara.Data.Column</div>
<div class="tip" id="fs20">static member Column.Create : name:string * rows:ColumnValues * count:int -&gt; Column<br />static member Column.Create : name:string * rows:seq&lt;DateTime&gt; * ?count:int -&gt; Column<br />static member Column.Create : name:string * rows:seq&lt;bool&gt; * ?count:int -&gt; Column<br />static member Column.Create : name:string * rows:seq&lt;string&gt; * ?count:int -&gt; Column<br />static member Column.Create : name:string * rows:seq&lt;float&gt; * ?count:int -&gt; Column<br />static member Column.Create : name:string * rows:seq&lt;int&gt; * ?count:int -&gt; Column</div>
<div class="tip" id="fs21">val sprintf : format:Printf.StringFormat&lt;&#39;T&gt; -&gt; &#39;T<br /><br />Full name: Microsoft.FSharp.Core.ExtraTopLevelOperators.sprintf</div>
<div class="tip" id="fs22">property Column.Rows: ColumnValues</div>
<div class="tip" id="fs23">property Column.Height: int</div>
<div class="tip" id="fs24">val xsinx : seq&lt;float&gt;<br /><br />Full name: Tableops.xsinx</div>
<div class="tip" id="fs25">Multiple items<br />val float : value:&#39;T -&gt; float (requires member op_Explicit)<br /><br />Full name: Microsoft.FSharp.Core.Operators.float<br /><br />--------------------<br />type float = Double<br /><br />Full name: Microsoft.FSharp.Core.float<br /><br />--------------------<br />type float&lt;&#39;Measure&gt; = float<br /><br />Full name: Microsoft.FSharp.Core.float&lt;_&gt;</div>
<div class="tip" id="fs26">Multiple items<br />val seq : sequence:seq&lt;&#39;T&gt; -&gt; seq&lt;&#39;T&gt;<br /><br />Full name: Microsoft.FSharp.Core.Operators.seq<br /><br />--------------------<br />type seq&lt;&#39;T&gt; = IEnumerable&lt;&#39;T&gt;<br /><br />Full name: Microsoft.FSharp.Collections.seq&lt;_&gt;</div>
<div class="tip" id="fs27">static member Table.Map : columnNames:seq&lt;string&gt; -&gt; map:(&#39;a -&gt; &#39;b) -&gt; table:Table -&gt; seq&lt;&#39;c&gt;</div>
<div class="tip" id="fs28">val x : float</div>
<div class="tip" id="fs29">val sinx : float</div>
<div class="tip" id="fs30">val tableLog : Table<br /><br />Full name: Tableops.tableLog</div>
<div class="tip" id="fs31">static member Table.MapToColumn : newColumnName:string -&gt; columnNames:seq&lt;string&gt; -&gt; map:(&#39;a -&gt; &#39;b) -&gt; table:Table -&gt; Table</div>
<div class="tip" id="fs32">val log : value:&#39;T -&gt; &#39;T (requires member Log)<br /><br />Full name: Microsoft.FSharp.Core.Operators.log</div>
<div class="tip" id="fs33">val table_filter_x : Table<br /><br />Full name: Tableops.table_filter_x</div>
<div class="tip" id="fs34">static member Table.Filter : columnNames:seq&lt;string&gt; -&gt; predicate:(&#39;a -&gt; &#39;b) -&gt; table:Table -&gt; Table</div>
<div class="tip" id="fs35">val table_10rows : Table<br /><br />Full name: Tableops.table_10rows</div>
<div class="tip" id="fs36">static member Table.Filteri : columnNames:seq&lt;string&gt; -&gt; predicate:(int -&gt; &#39;a) -&gt; table:Table -&gt; Table</div>
<div class="tip" id="fs37">val approxIntegr : x:&#39;a -&gt; y:&#39;b -&gt; float<br /><br />Full name: Tableops.approxIntegr</div>
<div class="tip" id="fs38">val x : &#39;a</div>
<div class="tip" id="fs39">val y : &#39;b</div>
<div class="tip" id="fs40">val mutable sum : float</div>
<div class="tip" id="fs41">val i : int32</div>
<div class="tip" id="fs42">val integr : float<br /><br />Full name: Tableops.integr</div>
<div class="tip" id="fs43">static member Table.Transform : columnNames:seq&lt;string&gt; -&gt; transform:(Collections.Immutable.ImmutableArray&lt;&#39;a&gt; -&gt; &#39;b) -&gt; table:Table -&gt; &#39;c</div>
<div class="tip" id="fs44">val getRunningMax : values:seq&lt;&#39;a&gt; -&gt; seq&lt;&#39;a&gt; (requires comparison)<br /><br />Full name: Tableops.getRunningMax</div>
<div class="tip" id="fs45">val values : seq&lt;&#39;a&gt; (requires comparison)</div>
<div class="tip" id="fs46">val skip : count:int -&gt; source:seq&lt;&#39;T&gt; -&gt; seq&lt;&#39;T&gt;<br /><br />Full name: Microsoft.FSharp.Collections.Seq.skip</div>
<div class="tip" id="fs47">val scan : folder:(&#39;State -&gt; &#39;T -&gt; &#39;State) -&gt; state:&#39;State -&gt; source:seq&lt;&#39;T&gt; -&gt; seq&lt;&#39;State&gt;<br /><br />Full name: Microsoft.FSharp.Collections.Seq.scan</div>
<div class="tip" id="fs48">val max : &#39;a (requires comparison)</div>
<div class="tip" id="fs49">val sin : &#39;a (requires comparison)</div>
<div class="tip" id="fs50">val tableMax : Table<br /><br />Full name: Tableops.tableMax</div>
<div class="tip" id="fs51">val sinx : Collections.Immutable.ImmutableArray&lt;obj&gt;</div>
<div class="tip" id="fs52">val tableWithMax : Table<br /><br />Full name: Tableops.tableWithMax</div>
<div class="tip" id="fs53">static member Table.AppendTransform : columnNames:seq&lt;string&gt; -&gt; transform:(Collections.Immutable.ImmutableArray&lt;&#39;a&gt; -&gt; &#39;b) -&gt; table:Table -&gt; Table</div>

        </div>
        <div class="span3">
          <img src="/Angara.Table/img/logo.png" alt="F# Project" style="width:150px;margin:10px" />  
          <ul class="nav nav-list" id="menu" style="margin-top: 20px;">
            <li class="nav-header">Angara.Table</li>
            <li><a href="/Angara.Table/index.html">Home page</a></li>
            <li class="divider"></li>
            <li><a href="http://nuget.org/packages/Angara.Table">Get Library via NuGet</a></li>
            <li><a href="http://github.com/Microsoft/Angara.Table">Source Code on GitHub</a></li>
            <li><a href="/Angara.Table/license.html">License (MIT)</a></li>
            <li><a href="/Angara.Table/release-notes.html">Release Notes</a></li>
            
            <li class="nav-header">Getting started</li>
            <li><a href="/Angara.Table/tablecolumns.html">Table as Collection of Columns</a></li>
            <li><a href="/Angara.Table/tablerows.html">Table as Collection of Rows</a></li>
            <li><a href="/Angara.Table/matrix.html">Table as Matrix</a></li>
            <li><a href="/Angara.Table/saveload.html">Save and Load (CSV)</a></li>
            <li><a href="/Angara.Table/tableops.html">Table Operations</a></li>

            <li class="nav-header">Documentation</li>
            <li><a href="/Angara.Table/reference/index.html">API Reference</a></li>
          </ul>
        </div>
      </div>
    </div>
    <a href="http://github.com/Microsoft/Angara.Table"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub"/></a>
  </body>
  </html>
